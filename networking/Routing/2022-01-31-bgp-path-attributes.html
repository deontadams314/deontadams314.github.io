<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!--
    The page_title contains the title for a page as shown in the navigation.
    Site name contains the name as defined in the mkdocs.yml
  -->
  <title>BGP Path Attributes - unknown-networks</title>

  <!-- Page description -->
  

  <!-- Redirect -->
  
    <link rel="canonical" href="https://unknown-networks.com/networking/Routing/2022-01-31-bgp-path-attributes.html" />
  

  <!-- Page author -->
  
    <meta name="author" content="dta314" />
  
  <!--
    Just add a favicon.ico image to the docs.
  -->
  <link rel="shortcut icon" href="../../img/favicon.ico">

  <link rel="stylesheet" href="../../css/colors.css">
  <link rel="stylesheet" href="../../css/bundle.css">
  <link rel="stylesheet" href="../../css/theme.css">
  <link media="print" onload="this.media='all'" rel="stylesheet" href="../../css/atom-dark-one.min.css">
  <!--
    extra_ess contains paths to CSS files in the users
    documentation directory or a list of CSS files defined in
    their mkdocs.yml.

    http://www.mkdocs.org/user-guide/configuration/#extra_css
  -->
  

  
  

  <!--
    Include Google Analytics tracking code.

    http://www.mkdocs.org/user-guide/configuration/#google_analytics
  -->
  

</head>

<body>
<input id="dark-mode" type="checkbox" />
<!--
  The JS has to be loaded here for maximum performance, right after the #dark-mode
-->
<script src="../../js/theme.js"></script>
<div class="app-body">
  <!-- KPN STYLE Beginning -->
  <div class="app-layout ">
    <!-- Top Bar -->
    <nav class="app-layout__top-bar top-bar">
      <a class="top-bar__logo">
        <img alt="KPN Logo" src="../../img/logo-kpn.svg" />
      </a>
      <div class="top-bar__title">unknown-networks</div>
      <ul class="top-bar__menu">
        <!--
          Create a search form that sends the user to the search.html file - this is
          the other file in the template which adds search to the theme. The only
          requirement here is that there is a text input with the name 'q' and the
          action and methods match below.
        -->
          <li class="top-bar__item">

            <span role="search" id="search-input-wrapper">
              <form action="../../search.html" method="get">
                <input type="text" class="input" id="search-input" name="q" placeholder="Search..." />
              </form>
            </span >
          </li>
        <!--
          Versioning support
        -->
        
        <!--
          Support repo URL
        -->
        <li class="top-bar__item">
          
        </li>

        <li class="top-bar__item">
            <label class="top-bar__link" id="label-dark-mode" for="dark-mode" title="Dark mode">
              <svg alt="dark mode" width="24" height="24">
                <image xlink:href="../../img/ui-bulb.svg" width="24" height="24"/>
            </svg>
            </label>
        </li>
        <li class="top-bar__item top-bar__item--trigger"></li>

        <!-- <li class="top-bar__item">

          <a class="top-bar__link top-bar__link--active">Home</a>
        </li>
        <li class="top-bar__item"><a class="top-bar__link">Information</a></li>
        <li class="top-bar__item">
          <a class="top-bar__link top-bar__link--collapsed">Getting Started</a>

        </li>
        <li class="top-bar__item top-bar__item--trigger">Menu</li> -->
      </ul>
    </nav>

    <!--
      Create the navigation for the documentation.

      Because we don't know how many levels deep the navigation is, it needs to
      be included in it's own file so it can be recursive. Otherwise the theme
      can also only support a specific number of levels.

      See the nav.html file for more details about how this works.
    -->
    <nav class="app-layout__side-bar side-bar">
      <div class="side-bar__action-bar">
        <a class="side-bar__link" href="/">unknown-networks</a>
        <!--
          Versioning support
        -->
        
        <button class="side-bar__close"></button>
      </div>
      <ul class="side-bar__menu">
        
          <!--

-->

<li>
  <a href="../../welcome.html" class="side-bar__link ">
    Welcome
  </a>
</li>

        
          <!--

-->

  <li>
    <span class="side-bar__link side-bar__link--expanded side-bar__link--active">
      Networking
    </span>
    <ul class="side-bar__sub-menu side-bar__sub-menu--visible">
        
            <!--

-->

  <li>
    <span class="side-bar__link side-bar__link--collapsed">
      General
    </span>
    <ul class="side-bar__sub-menu ">
        
            <!--

-->

<li>
  <a href="../General/2022-02-15-all-about-arp.html" class="side-bar__link ">
    All About ARP
  </a>
</li>

        
            <!--

-->

<li>
  <a href="../General/2022-02-26-planes-data-control-management.html" class="side-bar__link ">
    Planes: Control, Data, Management
  </a>
</li>

        
            <!--

-->

<li>
  <a href="../General/2022-02-28-stp.html" class="side-bar__link ">
    STP: Spanning Tree Protocol 8012.1D
  </a>
</li>

        
    </ul>
  </li>

        
            <!--

-->

  <li>
    <span class="side-bar__link side-bar__link--expanded side-bar__link--active">
      Routing
    </span>
    <ul class="side-bar__sub-menu side-bar__sub-menu--visible">
        
            <!--

-->

<li>
  <a href="2022-01-27-bgp-states.html" class="side-bar__link ">
    BGP States
  </a>
</li>

        
            <!--

-->

<li>
  <a href="2022-01-31-bgp-path-attributes.html" class="side-bar__link side-bar__link--active">
    BGP Path Attributes
  </a>
</li>

        
            <!--

-->

<li>
  <a href="2022-02-02-ibgp.html" class="side-bar__link ">
    Internal BGP - iBGP
  </a>
</li>

        
            <!--

-->

<li>
  <a href="2022-02-04-route-reflectors-confederations.html" class="side-bar__link ">
    Route Reflectors And Confederations
  </a>
</li>

        
            <!--

-->

<li>
  <a href="2022-02-06-ospf-neighbor-states.html" class="side-bar__link ">
    OSPF Neighbor States
  </a>
</li>

        
            <!--

-->

<li>
  <a href="2022-02-18-ospf-loop-prevention.html" class="side-bar__link ">
    OSPF Loop Prevention
  </a>
</li>

        
            <!--

-->

<li>
  <a href="2022-02-24-bgp-nwlla-omni.html" class="side-bar__link ">
    BGP - N WLLA OMNI
  </a>
</li>

        
            <!--

-->

<li>
  <a href="2022-03-01-routing-loops-prev.html" class="side-bar__link ">
    Split Horizon/Posion Reverse/Route Poisoning
  </a>
</li>

        
    </ul>
  </li>

        
            <!--

-->

  <li>
    <span class="side-bar__link side-bar__link--collapsed">
      TCP IP
    </span>
    <ul class="side-bar__sub-menu ">
        
            <!--

-->

<li>
  <a href="../TCP-IP/2022-01-20-tcp-the-handshake.html" class="side-bar__link ">
    TCP - The Handshake
  </a>
</li>

        
            <!--

-->

<li>
  <a href="../TCP-IP/2022-01-30-tcp-halfclose-halfopen.html" class="side-bar__link ">
    TCP - Half-Close And Half-Open
  </a>
</li>

        
            <!--

-->

<li>
  <a href="../TCP-IP/2022-02-07-tcp-window.html" class="side-bar__link ">
    The TCP Window
  </a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

        
          <!--

-->

  <li>
    <span class="side-bar__link side-bar__link--collapsed">
      Security
    </span>
    <ul class="side-bar__sub-menu ">
        
            <!--

-->

  <li>
    <span class="side-bar__link side-bar__link--collapsed">
      General
    </span>
    <ul class="side-bar__sub-menu ">
        
            <!--

-->

<li>
  <a href="../../security/General/2022-04-10-how-tls-works.html" class="side-bar__link ">
    How TLS Works
  </a>
</li>

        
    </ul>
  </li>

        
            <!--

-->

  <li>
    <span class="side-bar__link side-bar__link--collapsed">
      Network Security
    </span>
    <ul class="side-bar__sub-menu ">
        
            <!--

-->

<li>
  <a href="../../security/Network-Security/2022-04-18-netsec-vlan-hopping.html" class="side-bar__link ">
    VLAN Hopping
  </a>
</li>

        
            <!--

-->

<li>
  <a href="../../security/Network-Security/2022-04-19-netsec-arp-spoofing.html" class="side-bar__link ">
    ARP Spoofing
  </a>
</li>

        
            <!--

-->

<li>
  <a href="../../security/Network-Security/2022-04-20-netsec-ddos-attacks.html" class="side-bar__link ">
    DDoS Attacks
  </a>
</li>

        
            <!--

-->

<li>
  <a href="../../security/Network-Security/2022-04-25-netsec-dns-spoofing.html" class="side-bar__link ">
    DNS Spoofing
  </a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

        
      </ul>
    </nav>

    <!-- MAIN BLOCK -->
    <main class="app-layout__main main">
      <div class="app-layout__title-bar title-bar">
        <div class="title-bar__title">BGP Path Attributes</div>
      </div>
      
      <div class="sidebar--secondary hidden-s hidden-xs">
        <h4>Table of contents</h4>
        <ul>
        
          
            
                <li><a class="a" href="#as_path">AS_PATH</a></li>
                
            
                <li><a class="a" href="#origin">ORIGIN</a></li>
                
            
                <li><a class="a" href="#next_hop">NEXT_HOP</a></li>
                
            
                <li><a class="a" href="#local_pref">LOCAL_PREF</a></li>
                
            
                <li><a class="a" href="#multi_exit_disc-med">MULTI_EXIT_DISC (MED)</a></li>
                
            
                <li><a class="a" href="#atomic_aggregate-aggregator">ATOMIC_AGGREGATE &amp; AGGREGATOR</a></li>
                
            
                <li><a class="a" href="#aggregator">AGGREGATOR</a></li>
                
            
                <li><a class="a" href="#community">COMMUNITY</a></li>
                
            
                <li><a class="a" href="#originator_id">ORIGINATOR_ID</a></li>
                
            
                <li><a class="a" href="#cluster_list">CLUSTER_LIST</a></li>
                
            
                <li><a class="a" href="#weight">WEIGHT</a></li>
                
            
          
        
        </ul>
      </div>
      
      <div class="container content-block">
        <div class="kpn-style">
          <div class="card">
            <div class="card__body">

              
              <h1 id="bgp-path-attributes"><strong>BGP Path Attributes</strong><a class="headerlink" href="#bgp-path-attributes" title="Permanent link">#</a></h1>
<p>BGP uses a series of path attributes to make its routing decisions. This can affect how traffic is routed to or even how traffic is received from peers. Here we will take a look and discuss these path attributes to better understand how they can affec BGP behavior.</p>
<h2 id="as_path">AS_PATH<a class="headerlink" href="#as_path" title="Permanent link">#</a></h2>
<ul>
<li>
<p>The AS_PATH attribute describes the autonomous systems that the network prefix (NLRI) has crossed. The AS numbers listed in the AS_PATH were prepended from other BGP speakers.</p>
</li>
<li>
<p>AS_PATH can help prevent loops because if a BGP speaker see's it's own AS in the attribute path it will know to disregard the route.</p>
</li>
<li>
<p>This attribute can also help influence incoming traffic by changing the AS path of it's advertised route. The BGP router will add it's own AS multiple times to the AS_PATH. This is know as <em>AS Path Prepending</em>.</p>
</li>
<li>
<p>This is a well-known mandatory attribute.</p>
</li>
</ul>
<h2 id="origin">ORIGIN<a class="headerlink" href="#origin" title="Permanent link">#</a></h2>
<ul>
<li>
<p>The ORIGIN attribute tells the BGP speaker where the route originated from. There are 3 possible areas of origin for a NLRI.</p>
<ul>
<li>IGP: The route originated from a routing protocol internal to the originating AS. IGP has the highest preference.</li>
<li>EGP: The route originated from the Exterior Gateway Protocol. This has the second highest preference.</li>
<li>Incomplete: This means there is not enough information to determine where the route originated. This doesnt necessarily mean the route is bad just there is no way to determine the original source.</li>
</ul>
</li>
<li>
<p>This is a well-known mandatory attribute.</p>
</li>
</ul>
<h2 id="next_hop">NEXT_HOP<a class="headerlink" href="#next_hop" title="Permanent link">#</a></h2>
<ul>
<li>
<p>As the name suggests, the NEXT_HOP attribute will tell us the the IP address of the next hop router on the path to the destination. Keep in mind this will not always be the next hop neighbor. Here are 3 rules regarding this attribute.</p>
<ul>
<li>
<p>EBGP: If the advertising peer and receiving peer are in different AS, the NEXT_HOP will be the IP address of that advertising peer.</p>
</li>
<li>
<p>IBGP_1: If the advertising peer is in the same AS and the prefix is in the same AS, then the NEXT_HOP will the be the IP address of the peer who advertised the route.</p>
</li>
<li>
<p>IBGP_2: If the advertising peer are IBGP neighbors and the prefix was learned from another AS, the NEXT_HOP will be the ip address of external peer where the prefix was learned.</p>
</li>
</ul>
</li>
<li>
<p>This is a well-known mandatory attribute.</p>
</li>
</ul>
<h2 id="local_pref">LOCAL_PREF<a class="headerlink" href="#local_pref" title="Permanent link">#</a></h2>
<ul>
<li>
<p>LOCAL_PREF is an attribute that is only shared with iBGP neighbors not eBGP neighbors. The LOCAL_PREF does not leave the AS. A route will share the LOCAL_PREF to iBGP neighbors to dictate where traffic will be preffered. </p>
</li>
<li>
<p>The highest LOCAL_PREF is preffered and chosen for those routes.</p>
</li>
<li>
<p>Ths is a well-known discretionary attribute.</p>
</li>
</ul>
<h2 id="multi_exit_disc-med">MULTI_EXIT_DISC (MED)<a class="headerlink" href="#multi_exit_disc-med" title="Permanent link">#</a></h2>
<ul>
<li>
<p>The MULTI_EXIT_DISC can influence incoming traffic from external AS. This attribute is actually carried in EBGP update messages and will tell another AS its preferred ingress point. MEDs are only used to influence traffic between two directly connected AS and will not pass onto others.</p>
</li>
<li>
<p>The lowest MED value is the preffred value for routes.</p>
</li>
<li>
<p>This is an optional non-transitive attribute.</p>
</li>
</ul>
<h2 id="atomic_aggregate-aggregator">ATOMIC_AGGREGATE &amp; AGGREGATOR<a class="headerlink" href="#atomic_aggregate-aggregator" title="Permanent link">#</a></h2>
<ul>
<li>
<p>The ATOMIC_AGGREGATE and AGGREGATOR are two seperate path attributes but go hand and hand. When routes are summarized and then advertised via BGP the AS_PATH information is lost on the route. The adveriser of the route removes all other AS#s and instead add it's own. The ATOMIC_AGGREGATE attribute is added to warn neighbors that "Hey I am advertising a summarized route the AS info was lost". </p>
</li>
<li>
<p>The ATOMIC_AGGREGATE never leaves the route when passed onto other neighbors</p>
</li>
<li>
<p>This is a well-known discretionary attribute.</p>
</li>
</ul>
<h2 id="aggregator">AGGREGATOR<a class="headerlink" href="#aggregator" title="Permanent link">#</a></h2>
<ul>
<li>
<p>The AGGREGATOR is an optional path attribute that a BGP speaker can use when when the ATOMIC_AGGREGATE has been set. This attribute provides information about wher the aggregation was performed. This will include the AS# and IP address of the router that originated the aggregate route.</p>
</li>
<li>
<p>This is an optional transitive attribute.</p>
</li>
</ul>
<h2 id="community">COMMUNITY<a class="headerlink" href="#community" title="Permanent link">#</a></h2>
<ul>
<li>
<p>The COMMUNITY attribute can be used to tag routes to modify routing attiributes. For example I can tag routes from Group A all with a COMMUNITY attribute. This way I can change MED or LOCAL_PREF attributes based upon the COMMUNITY.</p>
</li>
<li>
<p>There are 4 well known COMMUNITY groups</p>
<ul>
<li>Internet: All routes belong here by default. Routes can be advertised to all BGP neighbors.</li>
<li>No-Advertise: Routes cannot be advertised at all.</li>
<li>No-Export: Routes receiving this value cannot be advertised to eBGP peers.</li>
<li>Local-AS: Routes with this cannot be advertised to eBGP peers and stay within the AS.</li>
</ul>
</li>
<li>
<p>This is an optional transitive attribute.</p>
</li>
</ul>
<h2 id="originator_id">ORIGINATOR_ID<a class="headerlink" href="#originator_id" title="Permanent link">#</a></h2>
<ul>
<li>
<p>ORIGINATOR_ID is used by route reflectors and used for preventing route loops. This is created by the route reflector and if the router see its RID in this attribute it knows to ignore the route because a loop has occured.</p>
</li>
<li>
<p>This is an optional non-transitive attribute.</p>
</li>
</ul>
<h2 id="cluster_list">CLUSTER_LIST<a class="headerlink" href="#cluster_list" title="Permanent link">#</a></h2>
<ul>
<li>
<p>CLUSTER_LIST is also used by route reflectors. This is a sequence of route reflector ID's in which the route has passed through. If a route reflector see its local cluster ID here in a received route it, a loop has occured and the route is ignored.</p>
</li>
<li>
<p>This is an optional non-transitive attribute.</p>
</li>
</ul>
<h2 id="weight">WEIGHT<a class="headerlink" href="#weight" title="Permanent link">#</a></h2>
<ul>
<li>
<p>This is a Cisco specific attribute that only exists on the local router. This is not shared with any other router.</p>
</li>
<li>
<p>The weight can be assigned to a route the higher the weight the more preffered the route. Weight is considered above all attributes on Cisco devices.</p>
</li>
<li>
<p>A number between 0-65,535 can be used for Weight.</p>
</li>
</ul>
              
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- FOOTER -->
    <footer class="footer">
      <div class="footer__body">
        
        <div class="row">
          <div class="col col--s-4 col--m-3 col--l-2">
          </div>
          <div class="col col--s-4 col--m space-between">
            
              <a class="footer__link padding-top-0 navigation-prev"
                href="2022-01-27-bgp-states.html"
                title="BGP States">
                &#8592; Previous Page
              </a>
            
            
            
              <a class="footer__link padding-top-0 navigation-next"
                href="2022-02-02-ibgp.html"
                title="Internal BGP - iBGP"/>
                Next Page &#8594;
              </a>
            
          </div>
          <div class="col col--s-4 col--m-3 ">
          </div>
        </div>
        
      </div>
    </footer>
  </div>


  <!--
  MkDocs version      : 1.6.1
  Docs Build Date UTC : 2025-02-23 21:14:46.531881+00:00
  -->

  <!--
    To include static assets from our theme, just add
    ../.. beforehand which will be the relative path to
    the root of the documentation.
  -->
  <script src="../../js/highlight.min.js"></script>
  <script src="../../js/languages/groovy.min.js"></script>
  <script src="../../js/languages/asciidoc.min.js"></script>
  <script src="../../js/languages/nix.min.js"></script>

  <script>
    hljs.highlightAll();
  </script>
  <script async src="../../js/detail.js"></script>
  <!--
    extra_javascript contains paths to JavaScript files in the
    users documentation directory or a list of JavaScript files
    defined in their mkdocs.yml.

    http://www.mkdocs.org/user-guide/configuration/#extra_javascript
  -->
  
    <script src="../../search/main.js"></script>
  


  <script>
  function getMermaidTheme() {
    if (document.getElementById("dark-mode").checked) {
      return 'dark'
    }
    return 'forest'
  }

  function initMermaid() {
    mermaid.initialize({
      theme: getMermaidTheme(),
      logLevel: 1,
    });
  }
  var mermaidClass = document.getElementsByClassName('mermaid');
  if (mermaidClass.length > 0) {

    var mermaidScript = document.createElement('script');
    mermaidScript.setAttribute("src", "../../js/mermaid.min.js");
    mermaidScript.setAttribute("async", "false");
    mermaidScript.setAttribute("type", "text/javascript");
    mermaidScript.onload = initMermaid;
    document.body.appendChild(mermaidScript)

  }
  </script>

</div>
</body>
</html>